---
tags:
---

### TCP vs UDS


|            | https://news.ycombinator.com/item?id=37466475                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| ---------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| TCP vs UDS | [majke](https://news.ycombinator.com/user?id=majke) [on Sept 11, 2023](https://news.ycombinator.com/item?id=37467892) \| [next](https://news.ycombinator.com/item?id=37466475#37467894)<br><br>  <br><br>Always use Unix Domain sockets if you can. There are at least three concerns with TCP.<br><br>First, local port numbers are a limited resource.<br><br>[https://blog.cloudflare.com/how-to-stop-running-out-of-ephem...](https://blog.cloudflare.com/how-to-stop-running-out-of-ephemeral-ports-and-start-to-love-long-lived-connections/) [https://blog.cloudflare.com/the-quantum-state-of-a-tcp-port/](https://blog.cloudflare.com/the-quantum-state-of-a-tcp-port/) [https://blog.cloudflare.com/this-is-strictly-a-violation-of-...](https://blog.cloudflare.com/this-is-strictly-a-violation-of-the-tcp-specification/)<br><br>Then the TCP buffer autotune can go berserk: [https://blog.cloudflare.com/unbounded-memory-usage-by-tcp-fo...](https://blog.cloudflare.com/unbounded-memory-usage-by-tcp-for-receive-buffers-and-how-we-fixed-it/) [https://blog.cloudflare.com/when-the-window-is-not-fully-ope...](https://blog.cloudflare.com/when-the-window-is-not-fully-open-your-tcp-stack-is-doing-more-than-you-think/)<br><br>Finally, conntrack. [https://blog.cloudflare.com/conntrack-tales-one-thousand-and...](https://blog.cloudflare.com/conntrack-tales-one-thousand-and-one-flows/) [https://blog.cloudflare.com/conntrack-turns-a-blind-eye-to-d...](https://blog.cloudflare.com/conntrack-turns-a-blind-eye-to-dropped-syns/)<br><br>These issues don't exist in Unix Sockets land. |

| from hackernews                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| [  <br>bheadmaster](https://news.ycombinator.com/user?id=bheadmaster) [on Sept 11, 2023](https://news.ycombinator.com/item?id=37469373) \| [root](https://news.ycombinator.com/item?id=37466475#37467892) \| [parent](https://news.ycombinator.com/item?id=37466475#37468942) \| [next](https://news.ycombinator.com/item?id=37466475#37472829) [–]<br><br>  <br><br>In my experience, for small unbatchable messages, UNIX sockets are fast enough not to warrant the complexity of dealing with shared memory.<br><br>However, for bigger and/or batchable messages, shared memory ringbuffer + UNIX socket for synchronization is the most convenient yet fast IPC I've used. |

What are some good use cases for **async** ring-buffers?
