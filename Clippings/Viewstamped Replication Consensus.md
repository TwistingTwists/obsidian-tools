---
title: "Viewstamped Replication Consensus"
source: "https://tech.sedhu.me/viewstamped-replication"
author:
  - "[[Sedhu]]"
published: 2025-11-13
created: 2025-12-19
description: "Viewstamped Replication Consensus Algorithm"
tags:
  - "clippings"
---
![Viewstamped Replication](https://cdn.hashnode.com/res/hashnode/image/stock/unsplash/3y1zF4hIPCg/upload/cf8d71857b2cffcfcd109f049a4c7e54.jpeg?w=1600&h=840&fit=crop&crop=entropy&auto=compress,format&format=webp)

Viewstamped Replication

Photo by [Hans-Peter Gauster](https://unsplash.com/@sloppyperfectionist?utm_source=Hashnode&utm_medium=referral) on [Unsplash](https://unsplash.com/?utm_source=Hashnode&utm_medium=referral)

## Viewstamped Replication

## The Consensus Algorithm Nobody Talks About (But Everyone Should)![Sedhu's photo](https://cdn.hashnode.com/res/hashnode/image/upload/v1631764089068/uAIrlBw-F.png?w=200&h=200&fit=crop&crop=faces&auto=compress,format&format=webp)

Sedhu's photo

[Sedhu](https://hashnode.com/@sedhu)

·

7 min read

## Introduction

Imagine you and your two best friends are keeping score in a video game. One friend is the "scorekeeper" and announces all the points. But what if the scorekeeper's controller breaks mid-game? You need a way to agree on the score without them.

Viewstamped Replication is like having a protocol: "If the scorekeeper fails, we pick the next person in a predetermined order—no arguing." You also write down every score on paper (all three of you), so even if someone forgets, you can check the paper and catch up.

---

## Abstract

Viewstamped Replication (VSR) is a consensus algorithm that keeps replicated systems consistent when nodes fail. Here's how it works:

### Key Concepts

1. **Normal Operation:** A designated "primary" node receives requests from clients, stamps them with a view number (like a logical clock), and sends them to backup replicas. The primary waits for acknowledgment from a quorum (majority) before committing the operation.
2. **View Change (Failover):** If the primary becomes unresponsive (detected via timeout), the system automatically transitions to a new view. The next replica in a deterministic round-robin order becomes the new primary—no elections, no voting.
3. **Quorum Intersection:** Every committed operation is known by at least f+1 replicas in a 2f+1 system. When a new primary takes over, it queries at least f+1 replicas to find the latest committed state, ensuring no data loss.
4. **View Numbers:** Operations are tagged with view numbers, ensuring ordering even across view changes. If two operations have the same sequence number, the one from a higher view number "wins."

The beauty: it's **simpler than Raft** (no split-vote elections) and **faster** (deterministic leader selection, parallel replication).

### VSR Normal Operation Flow

### VSR View Change Flow

---

## Architecture

VSR achieves strong safety guarantees with superior performance characteristics compared to Multi-Paxos and Raft. Here's the technical depth:

### Key Architectural Differences from Raft

**Deterministic Leader Selection**

- Unlike Raft's randomized election timeouts (which introduce latency variance), VSR pre-determines the next primary as `(current_primary_index + 1) mod cluster_size`. This eliminates split-vote scenarios and achieves sub-millisecond failover.

**Passive vs. Active Replication**

- Raft employs active replication—all replicas independently execute operations. VSR uses passive replication—only the primary executes operations, reducing state machine redundancy overhead. Backups maintain logs purely for recovery.

**Recovery Protocol**

- VSR includes a built-in recovery protocol for crashed nodes rejoining the cluster. A recovering node requests state from at least f+1 replicas (including the current primary) and applies the latest known committed state. This decouples recovery from durable storage guarantees, unlike Raft which assumes perfect storage.

**View Change Protocol**

- When a replica detects primary failure (via heartbeat timeout or explicit view-change messages), it advances its view number and broadcasts `START-VIEW-CHANGE`. When a majority of `DO-VIEW-CHANGE` messages is collected, the designated new primary sends `START-VIEW` with the highest-numbered log from the quorum, ensuring linearizability.

### Comparison Table: VSR vs Raft vs Paxos

| Aspect | Raft | Viewstamped Replication | Paxos (Multi-Paxos) |
| --- | --- | --- | --- |
| **Leader Election** | Randomized timeouts, split-vote problem | Deterministic modulo, no split votes | Two-phase with proposer election |
| **Failover Latency** | Variable (election timeout + message delays) | Predictable (heartbeat timeout + view change) | Higher (Prepare phase + Accept phase) |
| **Log Replication** | Active (all replicas execute) | Passive (primary only executes) | Active (all replicas may execute) |
| **Recovery** | Depends on perfect durable storage | Independent recovery protocol (Merkle trees) | Depends on learner state |
| **Availability** | Lower (leader must have pristine log) | Higher (quorum repair via Merkle trees) | Moderate (learner-based recovery) |
| **Throughput** | Good | Higher (batching, pipelining, lower execution overhead) | Good (but more complex) |
| **Complexity** | Medium | Medium-High | High |
| **Production Systems** | etcd, Consul, CockroachDB | Google Spanner, HDFS JournalNodes, **TigerBeetle** | Google Chubby, Apache ZooKeeper |
| **Message Complexity** | O(n) per operation | O(n) per operation | O(n²) in worst case |
| **Byzantine Tolerance** | No | No | Yes (with BFT variant) |

### Quorum Intersection Property

<svg aria-roledescription="flowchart-v2" role="graphics-document document" viewBox="0 0 243.1750030517578 710" style="max-width: 243.1750030517578px;" class="flowchart" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="100%" id="rg"><g><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="5" viewBox="0 0 10 10" class="marker flowchart-v2" id="rg_flowchart-v2-pointEnd"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 0 L 10 5 L 0 10 z"></path></marker><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="4.5" viewBox="0 0 10 10" class="marker flowchart-v2" id="rg_flowchart-v2-pointStart"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 5 L 10 10 L 10 0 z"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="11" viewBox="0 0 10 10" class="marker flowchart-v2" id="rg_flowchart-v2-circleEnd"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="-1" viewBox="0 0 10 10" class="marker flowchart-v2" id="rg_flowchart-v2-circleStart"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="12" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="rg_flowchart-v2-crossEnd"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="-1" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="rg_flowchart-v2-crossStart"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><g class="root"><g class="clusters"></g><g class="edgePaths"><path marker-end="url(#rg_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_A_B_0" d="M121.588,86L121.588,90.167C121.588,94.333,121.588,102.667,121.588,108.917C121.588,115.167,121.588,119.333,121.588,122.833C121.588,126.333,121.588,129.167,121.588,130.583L121.588,132"></path><path marker-end="url(#rg_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_B_C_1" d="M121.588,190L121.588,194.167C121.588,198.333,121.588,206.667,121.588,212.917C121.588,219.167,121.588,223.333,121.588,226.833C121.588,230.333,121.588,233.167,121.588,234.583L121.588,236"></path><path marker-end="url(#rg_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_C_D_2" d="M121.588,318L121.588,322.167C121.588,326.333,121.588,334.667,121.588,340.917C121.588,347.167,121.588,351.333,121.588,354.833C121.588,358.333,121.588,361.167,121.588,362.583L121.588,364"></path><path marker-end="url(#rg_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_D_E_3" d="M121.588,446L121.588,450.167C121.588,454.333,121.588,462.667,121.588,468.917C121.588,475.167,121.588,479.333,121.588,482.833C121.588,486.333,121.588,489.167,121.588,490.583L121.588,492"></path><path marker-end="url(#rg_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_E_F_4" d="M121.588,574L121.588,578.167C121.588,582.333,121.588,590.667,121.588,596.917C121.588,603.167,121.588,607.333,121.588,610.833C121.588,614.333,121.588,617.167,121.588,618.583L121.588,620"></path></g><g class="edgeLabels"><g class="edgeLabel"><g transform="translate(0, 0)" class="label"></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"></g></g></g><g class="nodes"><g transform="translate(121.5875015258789, 47)" id="flowchart-A-0" class="node default"><rect height="78" width="186.2249984741211" y="-39" x="-93.11249923706055" style="" class="basic label-container"></rect><g transform="translate(-63.11249923706055, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="126.2249984741211"><p xmlns="http://www.w3.org/1999/xhtml"><span></span></p><p xmlns="http://www.w3.org/1999/xhtml">Cluster: 5 Nodes<br>(N=5, f=2)</p><p xmlns="http://www.w3.org/1999/xhtml"></p></foreignObject></g></g><g transform="translate(121.5875015258789, 163)" id="flowchart-B-1" class="node default"><rect height="54" width="176.3625030517578" y="-27" x="-88.1812515258789" style="" class="basic label-container"></rect><g transform="translate(-58.181251525878906, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="116.36250305175781"><p xmlns="http://www.w3.org/1999/xhtml"><span></span></p><p xmlns="http://www.w3.org/1999/xhtml">Quorum Size: 3</p><p xmlns="http://www.w3.org/1999/xhtml"></p></foreignObject></g></g><g transform="translate(121.5875015258789, 279)" id="flowchart-C-3" class="node default"><rect height="78" width="200.65000915527344" y="-39" x="-100.32500457763672" style="" class="basic label-container"></rect><g transform="translate(-70.32500457763672, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="140.65000915527344"><p xmlns="http://www.w3.org/1999/xhtml"><span></span></p><p xmlns="http://www.w3.org/1999/xhtml">Any two quorums<br>must overlap by ≥1</p><p xmlns="http://www.w3.org/1999/xhtml"></p></foreignObject></g></g><g transform="translate(121.5875015258789, 407)" id="flowchart-D-5" class="node default"><rect height="78" width="187.2125015258789" y="-39" x="-93.60625076293945" style="" class="basic label-container"></rect><g transform="translate(-63.60625076293945, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="127.2125015258789"><p xmlns="http://www.w3.org/1999/xhtml"><span></span></p><p xmlns="http://www.w3.org/1999/xhtml">Primary commits<br>with 3 replicas</p><p xmlns="http://www.w3.org/1999/xhtml"></p></foreignObject></g></g><g transform="translate(121.5875015258789, 535)" id="flowchart-E-7" class="node default"><rect height="78" width="217.72500610351562" y="-39" x="-108.86250305175781" style="" class="basic label-container"></rect><g transform="translate(-78.86250305175781, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="157.72500610351562"><p xmlns="http://www.w3.org/1999/xhtml"><span></span></p><p xmlns="http://www.w3.org/1999/xhtml">New primary queries<br>f+1=3 replicas</p><p xmlns="http://www.w3.org/1999/xhtml"></p></foreignObject></g></g><g transform="translate(121.5875015258789, 663)" id="flowchart-F-9" class="node default"><rect height="78" width="227.1750030517578" y="-39" x="-113.5875015258789" style="" class="basic label-container"></rect><g transform="translate(-83.5875015258789, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="167.1750030517578"><p xmlns="http://www.w3.org/1999/xhtml"><span></span></p><p xmlns="http://www.w3.org/1999/xhtml">Guaranteed to find<br>latest committed state</p><p xmlns="http://www.w3.org/1999/xhtml"></p></foreignObject></g></g></g></g></g></svg>

### VSR State Machine Architecture

<svg aria-roledescription="stateDiagram" role="graphics-document document" viewBox="0 0 701.0375366210938 534" style="max-width: 701.0375366210938px;" class="statediagram" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="100%" id="rh"><g><defs><marker orient="auto" markerUnits="userSpaceOnUse" markerHeight="14" markerWidth="20" refY="7" refX="19" id="rh_stateDiagram-barbEnd"><path d="M 19,7 L9,13 L14,7 L9,1 Z"></path></marker></defs><g class="root"><g class="clusters"></g><g class="edgePaths"><path marker-end="url(#rh_stateDiagram-barbEnd)" style=";fill:none" class="edge-thickness-normal edge-pattern-solid transition" id="edge0" d="M212.156,22L212.156,26.167C212.156,30.333,212.156,38.667,212.156,44.917C212.156,51.167,212.156,55.333,212.156,59.5C212.156,63.667,212.156,67.833,212.156,69.917L212.156,72"></path><path marker-end="url(#rh_stateDiagram-barbEnd)" style=";fill:none" class="edge-thickness-normal edge-pattern-solid transition" id="edge1" d="M269.144,104.42L312.414,113.85C355.683,123.28,442.223,142.14,485.493,155.653C528.763,169.167,528.763,177.333,528.763,185.5C528.763,193.667,528.763,201.833,528.763,205.917L528.763,210"></path><path style=";fill:none" class="edge-thickness-normal edge-pattern-solid transition" id="NormalMode-cyclic-special-1" d="M226.444,112L232.279,120.167C238.113,128.333,249.781,144.667,255.616,158.579C261.45,172.492,261.45,183.983,261.45,195.475C261.45,206.967,261.45,218.458,261.45,224.204L261.45,229.95"></path><path style=";fill:none" class="edge-thickness-normal edge-pattern-solid transition" id="NormalMode-cyclic-special-mid" d="M261.45,230.05L261.45,241.542C261.45,253.033,261.45,276.017,257.345,293.254C253.24,310.492,245.031,321.983,236.821,333.475C228.611,344.967,220.402,356.458,216.297,362.204L212.192,367.95"></path><path marker-end="url(#rh_stateDiagram-barbEnd)" style=";fill:none" class="edge-thickness-normal edge-pattern-solid transition" id="NormalMode-cyclic-special-2" d="M212.121,367.95L203.911,356.458C195.701,344.967,179.282,321.983,171.072,298.992C162.863,276,162.863,253,162.863,230C162.863,207,162.863,184,165.78,168.417C168.697,152.833,174.531,144.667,180.365,136.5C186.2,128.333,192.034,120.167,194.951,116.083L197.868,112"></path><path marker-end="url(#rh_stateDiagram-barbEnd)" style=";fill:none" class="edge-thickness-normal edge-pattern-solid transition" id="edge3" d="M499.552,250L487.625,258.167C475.697,266.333,451.842,282.667,439.915,294.917C427.988,307.167,427.988,315.333,427.988,323.5C427.988,331.667,427.988,339.833,427.988,343.917L427.988,348"></path><path marker-end="url(#rh_stateDiagram-barbEnd)" style=";fill:none" class="edge-thickness-normal edge-pattern-solid transition" id="edge4" d="M427.988,388L427.988,396.167C427.988,404.333,427.988,420.667,417.165,433.069C406.343,445.472,384.699,453.944,363.055,462.416C341.41,470.889,319.766,479.361,308.944,483.597L298.122,487.833"></path><path marker-end="url(#rh_stateDiagram-barbEnd)" style=";fill:none" class="edge-thickness-normal edge-pattern-solid transition" id="edge5" d="M205.297,487.833L183.653,479.361C162.008,470.889,118.72,453.944,97.076,433.972C75.431,414,75.431,391,75.431,368C75.431,345,75.431,322,75.431,299C75.431,276,75.431,253,75.431,230C75.431,207,75.431,184,83.522,168.417C91.614,152.833,107.796,144.667,123.979,136.5C140.161,128.333,156.343,120.167,164.435,116.083L172.526,112"></path><path style=";fill:none" class="edge-thickness-normal edge-pattern-solid transition" id="ViewChange-cyclic-special-1" d="M555.469,250L566.374,258.167C577.279,266.333,599.09,282.667,609.995,296.579C620.9,310.492,620.9,321.983,620.9,333.475C620.9,344.967,620.9,356.458,620.9,362.204L620.9,367.95"></path><path style=";fill:none" class="edge-thickness-normal edge-pattern-solid transition" id="ViewChange-cyclic-special-mid" d="M620.9,368.05L620.9,379.542C620.9,391.033,620.9,414.017,617.064,431.254C613.227,448.492,605.555,459.983,597.882,471.475C590.21,482.967,582.537,494.458,578.701,500.204L574.865,505.95"></path><path marker-end="url(#rh_stateDiagram-barbEnd)" style=";fill:none" class="edge-thickness-normal edge-pattern-solid transition" id="ViewChange-cyclic-special-2" d="M574.798,505.95L567.125,494.458C559.453,482.967,544.108,459.983,536.435,436.992C528.763,414,528.763,391,528.763,368C528.763,345,528.763,322,528.763,306.417C528.763,290.833,528.763,282.667,528.763,274.5C528.763,266.333,528.763,258.167,528.763,254.083L528.763,250"></path></g><g class="edgeLabels"><g class="edgeLabel"><g transform="translate(0, 0)" class="label"></g></g><g transform="translate(528.7625122070312, 161)" class="edgeLabel"><g transform="translate(-77.1500015258789, -24)" class="label"><foreignObject height="48" width="154.3000030517578"><p xmlns="http://www.w3.org/1999/xhtml"><span></span></p><p xmlns="http://www.w3.org/1999/xhtml">Primary fails<br>or heartbeat timeout</p><p xmlns="http://www.w3.org/1999/xhtml"></p></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"></g></g><g transform="translate(261.4500045776367, 299)" class="edgeLabel"><g transform="translate(-78.5875015258789, -24)" class="label"><foreignObject height="48" width="157.1750030517578"><p xmlns="http://www.w3.org/1999/xhtml"><span></span></p><p xmlns="http://www.w3.org/1999/xhtml">Client requests<br>PREPARE + COMMIT</p><p xmlns="http://www.w3.org/1999/xhtml"></p></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"></g></g><g transform="translate(427.98751068115234, 299)" class="edgeLabel"><g transform="translate(-67.95000457763672, -24)" class="label"><foreignObject height="48" width="135.90000915527344"><p xmlns="http://www.w3.org/1999/xhtml"><span></span></p><p xmlns="http://www.w3.org/1999/xhtml">Elect new primary<br>via round-robin</p><p xmlns="http://www.w3.org/1999/xhtml"></p></foreignObject></g></g><g transform="translate(427.98751068115234, 437)" class="edgeLabel"><g transform="translate(-78.86250305175781, -24)" class="label"><foreignObject height="48" width="157.72500610351562"><p xmlns="http://www.w3.org/1999/xhtml"><span></span></p><p xmlns="http://www.w3.org/1999/xhtml">New primary queries<br>f+1 replicas</p><p xmlns="http://www.w3.org/1999/xhtml"></p></foreignObject></g></g><g transform="translate(75.4312515258789, 299)" class="edgeLabel"><g transform="translate(-67.4312515258789, -24)" class="label"><foreignObject height="48" width="134.8625030517578"><p xmlns="http://www.w3.org/1999/xhtml"><span></span></p><p xmlns="http://www.w3.org/1999/xhtml">Log synchronized<br>Ready to serve</p><p xmlns="http://www.w3.org/1999/xhtml"></p></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"></g></g><g transform="translate(620.900016784668, 437)" class="edgeLabel"><g transform="translate(-72.13750457763672, -12)" class="label"><foreignObject height="24" width="144.27500915527344"><p xmlns="http://www.w3.org/1999/xhtml"><span></span></p><p xmlns="http://www.w3.org/1999/xhtml">If new primary fails</p><p xmlns="http://www.w3.org/1999/xhtml"></p></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"></g></g></g><g class="nodes"><g transform="translate(212.15625381469727, 15)" id="state-root_start-0" class="node default"><circle height="14" width="14" r="7" class="state-start"></circle></g><g transform="translate(212.15625381469727, 92)" id="state-NormalMode-5" class="node  statediagram-state"><rect height="40" width="113.9749984741211" y="-20" x="-56.98749923706055" ry="5" rx="5" style="" class="basic label-container"></rect><g transform="translate(-48.98749923706055, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="97.9749984741211"><p xmlns="http://www.w3.org/1999/xhtml"><span></span></p><p xmlns="http://www.w3.org/1999/xhtml">NormalMode</p><p xmlns="http://www.w3.org/1999/xhtml"></p></foreignObject></g></g><g transform="translate(528.7625122070312, 230)" id="state-ViewChange-6" class="node  statediagram-state"><rect height="40" width="111.7750015258789" y="-20" x="-55.88750076293945" ry="5" rx="5" style="" class="basic label-container"></rect><g transform="translate(-47.88750076293945, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="95.7750015258789"><p xmlns="http://www.w3.org/1999/xhtml"><span></span></p><p xmlns="http://www.w3.org/1999/xhtml">ViewChange</p><p xmlns="http://www.w3.org/1999/xhtml"></p></foreignObject></g></g><g transform="translate(427.98751068115234, 368)" id="state-DetermineLead-4" class="node  statediagram-state"><rect height="40" width="131.5500030517578" y="-20" x="-65.7750015258789" ry="5" rx="5" style="" class="basic label-container"></rect><g transform="translate(-57.775001525878906, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="115.55000305175781"><p xmlns="http://www.w3.org/1999/xhtml"><span></span></p><p xmlns="http://www.w3.org/1999/xhtml">DetermineLead</p><p xmlns="http://www.w3.org/1999/xhtml"></p></foreignObject></g></g><g transform="translate(251.70938110351562, 506)" id="state-SyncState-5" class="node  statediagram-state"><rect height="40" width="92.82500457763672" y="-20" x="-46.41250228881836" ry="5" rx="5" style="" class="basic label-container"></rect><g transform="translate(-38.41250228881836, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="76.82500457763672"><p xmlns="http://www.w3.org/1999/xhtml"><span></span></p><p xmlns="http://www.w3.org/1999/xhtml">SyncState</p><p xmlns="http://www.w3.org/1999/xhtml"></p></foreignObject></g></g><g transform="translate(261.4500045776367, 230)" id="NormalMode---NormalMode---1" class="label edgeLabel"><rect height="0.1" width="0.1"></rect><g transform="translate(0, 0)" style="" class="label"><rect></rect></g></g><g transform="translate(212.15625381469727, 368)" id="NormalMode---NormalMode---2" class="label edgeLabel"><rect height="0.1" width="0.1"></rect><g transform="translate(0, 0)" style="" class="label"><rect></rect></g></g><g transform="translate(620.900016784668, 368)" id="ViewChange---ViewChange---1" class="label edgeLabel"><rect height="0.1" width="0.1"></rect><g transform="translate(0, 0)" style="" class="label"><rect></rect></g></g><g transform="translate(574.8312644958496, 506)" id="ViewChange---ViewChange---2" class="label edgeLabel"><rect height="0.1" width="0.1"></rect><g transform="translate(0, 0)" style="" class="label"><rect></rect></g></g></g></g></g></svg>

---

## How VSR Powers TigerBeetle's 1000x Throughput

### Throughput Optimization Flow

<svg aria-roledescription="flowchart-v2" role="graphics-document document" viewBox="0 0 1572.85009765625 118" style="max-width: 1572.85009765625px;" class="flowchart" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="100%" id="ri"><g><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="5" viewBox="0 0 10 10" class="marker flowchart-v2" id="ri_flowchart-v2-pointEnd"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 0 L 10 5 L 0 10 z"></path></marker><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="4.5" viewBox="0 0 10 10" class="marker flowchart-v2" id="ri_flowchart-v2-pointStart"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 5 L 10 10 L 10 0 z"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="11" viewBox="0 0 10 10" class="marker flowchart-v2" id="ri_flowchart-v2-circleEnd"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="-1" viewBox="0 0 10 10" class="marker flowchart-v2" id="ri_flowchart-v2-circleStart"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="12" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="ri_flowchart-v2-crossEnd"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="-1" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="ri_flowchart-v2-crossStart"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><g class="root"><g class="clusters"></g><g class="edgePaths"><path marker-end="url(#ri_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_A_B_0" d="M204.25,59L208.417,59C212.583,59,220.917,59,227.167,59C233.417,59,237.583,59,241.083,59C244.583,59,247.417,59,248.833,59L250.25,59"></path><path marker-end="url(#ri_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_B_C_1" d="M416.488,59L420.654,59C424.821,59,433.154,59,439.404,59C445.654,59,449.821,59,453.321,59C456.821,59,459.654,59,461.071,59L462.488,59"></path><path marker-end="url(#ri_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_C_D_2" d="M649.8,59L653.967,59C658.133,59,666.467,59,672.717,59C678.967,59,683.133,59,686.633,59C690.133,59,692.967,59,694.383,59L695.8,59"></path><path marker-end="url(#ri_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_D_E_3" d="M856.425,59L860.592,59C864.758,59,873.092,59,879.342,59C885.592,59,889.758,59,893.258,59C896.758,59,899.592,59,901.008,59L902.425,59"></path><path marker-end="url(#ri_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_E_F_4" d="M1060.675,59L1064.842,59C1069.008,59,1077.342,59,1083.592,59C1089.842,59,1094.008,59,1097.508,59C1101.008,59,1103.842,59,1105.258,59L1106.675,59"></path><path marker-end="url(#ri_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_F_G_5" d="M1302.388,59L1306.554,59C1310.721,59,1319.054,59,1325.304,59C1331.554,59,1335.721,59,1339.221,59C1342.721,59,1345.554,59,1346.971,59L1348.388,59"></path></g><g class="edgeLabels"><g class="edgeLabel"><g transform="translate(0, 0)" class="label"></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"></g></g></g><g class="nodes"><g transform="translate(106.125, 59)" id="flowchart-A-10" class="node default"><rect height="78" width="196.25" y="-39" x="-98.125" style="fill:#e1f5ff !important" class="basic label-container"></rect><g transform="translate(-68.125, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="136.25"><p xmlns="http://www.w3.org/1999/xhtml"><span></span></p><p xmlns="http://www.w3.org/1999/xhtml">Transaction Batch<br>8,000 txns</p><p xmlns="http://www.w3.org/1999/xhtml"></p></foreignObject></g></g><g transform="translate(335.3687515258789, 59)" id="flowchart-B-11" class="node default"><rect height="102" width="162.2375030517578" y="-51" x="-81.1187515258789" style="" class="basic label-container"></rect><g transform="translate(-51.118751525878906, -36)" style="" class="label"><rect></rect><foreignObject height="72" width="102.23750305175781"><p xmlns="http://www.w3.org/1999/xhtml"><span></span></p><p xmlns="http://www.w3.org/1999/xhtml">Stamp with<br>View Number<br>O1</p><p xmlns="http://www.w3.org/1999/xhtml"></p></foreignObject></g></g><g transform="translate(558.1437530517578, 59)" id="flowchart-C-13" class="node default"><rect height="78" width="183.3125" y="-39" x="-91.65625" style="" class="basic label-container"></rect><g transform="translate(-61.65625, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="123.3125"><p xmlns="http://www.w3.org/1999/xhtml"><span></span></p><p xmlns="http://www.w3.org/1999/xhtml">Send to Quorum<br>in Parallel</p><p xmlns="http://www.w3.org/1999/xhtml"></p></foreignObject></g></g><g transform="translate(778.1125030517578, 59)" id="flowchart-D-15" class="node default"><rect height="78" width="156.625" y="-39" x="-78.3125" style="" class="basic label-container"></rect><g transform="translate(-48.3125, -24)" style="" class="label"><rect></rect></g></g><g transform="translate(983.5500030517578, 59)" id="flowchart-E-17" class="node default"><rect height="78" width="154.25" y="-39" x="-77.125" style="" class="basic label-container"></rect><g transform="translate(-47.125, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="94.25"><p xmlns="http://www.w3.org/1999/xhtml"><span></span></p><p xmlns="http://www.w3.org/1999/xhtml">Quorum Ack<br>f+1 nodes</p><p xmlns="http://www.w3.org/1999/xhtml"></p></foreignObject></g></g><g transform="translate(1206.5312576293945, 59)" id="flowchart-F-19" class="node default"><rect height="78" width="191.71250915527344" y="-39" x="-95.85625457763672" style="" class="basic label-container"></rect><g transform="translate(-65.85625457763672, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="131.71250915527344"><p xmlns="http://www.w3.org/1999/xhtml"><span></span></p><p xmlns="http://www.w3.org/1999/xhtml">Execute Serially<br>on State Machine</p><p xmlns="http://www.w3.org/1999/xhtml"></p></foreignObject></g></g><g transform="translate(1458.6187591552734, 59)" id="flowchart-G-21" class="node default"><rect height="78" width="212.46250915527344" y="-39" x="-106.23125457763672" style="fill:#c8e6c9 !important" class="basic label-container"></rect><g transform="translate(-76.23125457763672, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="152.46250915527344"><p xmlns="http://www.w3.org/1999/xhtml"><span></span></p><p xmlns="http://www.w3.org/1999/xhtml">Commit + Response<br>to Clients</p><p xmlns="http://www.w3.org/1999/xhtml"></p></foreignObject></g></g></g></g></g></svg>

### Why VSR Wins for Financial Ledgers

1. **Batching Efficiency:** TigerBeetle batches up to 8,000 transactions per batch. VSR's view stamping (a lightweight logical clock) costs almost nothing—just an integer increment and replication.
2. **Normal Path Optimization:** In the steady state, VSR consensus isn't engaged at all—replicas simply append to their logs in parallel and execute serially on the replicated state machine. This bypasses heavy consensus coordination.
3. **Deterministic Failover:** No leader election storms. When the primary fails, the next replica knows immediately it's next (round-robin). No heartbeat storms, no cascade of election messages—just clean handoff.
4. **Quorum Replication:** Requiring f+1 acknowledgments before commit (not 2f+1) means TigerBeetle replicates to a majority faster than protocols requiring unanimous replication, reducing tail latency.
5. **Immutable Ledger Integration:** VSR's append-only nature aligns perfectly with financial ledger semantics. Every transfer is stamped with a view number that serves as a global ordering—this becomes your audit trail automatically.

### Performance Comparison

<svg aria-roledescription="flowchart-v2" role="graphics-document document" viewBox="0.000003814697265625 0 640.1000366210938 270" style="max-width: 640.1000366210938px;" class="flowchart" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="100%" id="rj"><g><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="5" viewBox="0 0 10 10" class="marker flowchart-v2" id="rj_flowchart-v2-pointEnd"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 0 L 10 5 L 0 10 z"></path></marker><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="4.5" viewBox="0 0 10 10" class="marker flowchart-v2" id="rj_flowchart-v2-pointStart"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 5 L 10 10 L 10 0 z"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="11" viewBox="0 0 10 10" class="marker flowchart-v2" id="rj_flowchart-v2-circleEnd"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="-1" viewBox="0 0 10 10" class="marker flowchart-v2" id="rj_flowchart-v2-circleStart"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="12" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="rj_flowchart-v2-crossEnd"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="-1" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="rj_flowchart-v2-crossStart"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><g class="root"><g class="clusters"></g><g class="edgePaths"><path marker-end="url(#rj_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_A_B_0" d="M134.275,59L143.194,59C152.113,59,169.95,59,184.457,59C198.965,59,210.142,59,220.652,59C231.163,59,241.006,59,245.928,59L250.85,59"></path><path marker-end="url(#rj_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_C_D_1" d="M128.956,211L138.761,211C148.567,211,168.177,211,182.442,211C196.706,211,205.625,211,213.877,211C222.129,211,229.715,211,233.507,211L237.3,211"></path><path marker-end="url(#rj_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_B_E_2" d="M409.238,59L415.663,59C422.088,59,434.938,59,445.608,62.083C456.279,65.167,464.771,71.333,472.724,77.108C480.676,82.883,488.089,88.266,491.795,90.958L495.502,93.65"></path><path marker-end="url(#rj_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_D_E_3" d="M422.788,211L426.954,211C431.121,211,439.454,211,447.867,207.917C456.279,204.833,464.771,198.667,472.724,192.892C480.676,187.117,488.089,181.734,491.795,179.042L495.502,176.35"></path></g><g class="edgeLabels"><g transform="translate(187.78750228881836, 59)" class="edgeLabel"><g transform="translate(-28.512500762939453, -12)" class="label"><foreignObject height="24" width="57.025001525878906"><p xmlns="http://www.w3.org/1999/xhtml"><span></span></p><p xmlns="http://www.w3.org/1999/xhtml">8K txns</p><p xmlns="http://www.w3.org/1999/xhtml"></p></foreignObject></g></g><g transform="translate(187.78750228881836, 211)" class="edgeLabel"><g transform="translate(-17.21875, -12)" class="label"><foreignObject height="24" width="34.4375"><p xmlns="http://www.w3.org/1999/xhtml"><span></span></p><p xmlns="http://www.w3.org/1999/xhtml">1 txn</p><p xmlns="http://www.w3.org/1999/xhtml"></p></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"></g></g></g><g class="nodes"><g transform="translate(71.13750076293945, 59)" id="flowchart-A-24" class="node default"><rect height="78" width="126.2750015258789" y="-39" x="-63.13750076293945" style="" class="basic label-container"></rect><g transform="translate(-33.13750076293945, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="66.2750015258789"><p xmlns="http://www.w3.org/1999/xhtml"><span></span></p><p xmlns="http://www.w3.org/1999/xhtml">VSR<br>Batching</p><p xmlns="http://www.w3.org/1999/xhtml"></p></foreignObject></g></g><g transform="translate(332.0437545776367, 59)" id="flowchart-B-25" class="node default"><rect height="102" width="154.38750457763672" y="-51" x="-77.19375228881836" style="" class="basic label-container"></rect><g transform="translate(-47.19375228881836, -36)" style="" class="label"><rect></rect><foreignObject height="72" width="94.38750457763672"><p xmlns="http://www.w3.org/1999/xhtml"><span></span></p><p xmlns="http://www.w3.org/1999/xhtml">1 Stamp<br>1 Replication<br>1 Execution</p><p xmlns="http://www.w3.org/1999/xhtml"></p></foreignObject></g></g><g transform="translate(71.13750076293945, 211)" id="flowchart-C-26" class="node default"><rect height="78" width="115.63750076293945" y="-39" x="-57.81875038146973" style="" class="basic label-container"></rect><g transform="translate(-27.818750381469727, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="55.63750076293945"><p xmlns="http://www.w3.org/1999/xhtml"><span></span></p><p xmlns="http://www.w3.org/1999/xhtml">Raft<br>Per-txn</p><p xmlns="http://www.w3.org/1999/xhtml"></p></foreignObject></g></g><g transform="translate(332.0437545776367, 211)" id="flowchart-D-27" class="node default"><rect height="102" width="181.4875030517578" y="-51" x="-90.7437515258789" style="" class="basic label-container"></rect><g transform="translate(-60.743751525878906, -36)" style="" class="label"><rect></rect><foreignObject height="72" width="121.48750305175781"><p xmlns="http://www.w3.org/1999/xhtml"><span></span></p><p xmlns="http://www.w3.org/1999/xhtml">1 Election check<br>1 Replication<br>1 Execution</p><p xmlns="http://www.w3.org/1999/xhtml"></p></foreignObject></g></g><g transform="translate(552.4437561035156, 135)" id="flowchart-E-29" class="node default"><rect height="78" width="159.3125" y="-39" x="-79.65625" style="fill:#fff9c4 !important" class="basic label-container"></rect><g transform="translate(-49.65625, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="99.3125"><p xmlns="http://www.w3.org/1999/xhtml"><span></span></p><p xmlns="http://www.w3.org/1999/xhtml">~1000x more<br>throughput</p><p xmlns="http://www.w3.org/1999/xhtml"></p></foreignObject></g></g></g></g></g></svg>

---

## Key Advantages of VSR

### Safety Guarantees

<svg aria-roledescription="flowchart-v2" role="graphics-document document" viewBox="0 0 565.862548828125 430" style="max-width: 565.862548828125px;" class="flowchart" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="100%" id="rk"><g><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="5" viewBox="0 0 10 10" class="marker flowchart-v2" id="rk_flowchart-v2-pointEnd"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 0 L 10 5 L 0 10 z"></path></marker><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="4.5" viewBox="0 0 10 10" class="marker flowchart-v2" id="rk_flowchart-v2-pointStart"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 5 L 10 10 L 10 0 z"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="11" viewBox="0 0 10 10" class="marker flowchart-v2" id="rk_flowchart-v2-circleEnd"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="-1" viewBox="0 0 10 10" class="marker flowchart-v2" id="rk_flowchart-v2-circleStart"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="12" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="rk_flowchart-v2-crossEnd"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="-1" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="rk_flowchart-v2-crossStart"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><g class="root"><g class="clusters"></g><g class="edgePaths"><path marker-end="url(#rk_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_A_B_0" d="M90.344,62L90.344,66.167C90.344,70.333,90.344,78.667,96.8,84.917C103.256,91.167,116.169,95.333,128.447,99.295C140.725,103.257,152.369,107.014,158.191,108.893L164.013,110.772"></path><path marker-end="url(#rk_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_C_B_1" d="M288.681,62L288.681,66.167C288.681,70.333,288.681,78.667,288.681,84.917C288.681,91.167,288.681,95.333,288.681,98.833C288.681,102.333,288.681,105.167,288.681,106.583L288.681,108"></path><path marker-end="url(#rk_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_D_B_2" d="M481.269,62L481.269,66.167C481.269,70.333,481.269,78.667,475,84.917C468.731,91.167,456.192,95.333,444.287,99.29C432.381,103.246,421.108,106.992,415.472,108.865L409.835,110.739"></path><path marker-end="url(#rk_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_B_E_3" d="M288.681,190L288.681,194.167C288.681,198.333,288.681,206.667,288.681,212.917C288.681,219.167,288.681,223.333,288.681,226.833C288.681,230.333,288.681,233.167,288.681,234.583L288.681,236"></path><path marker-end="url(#rk_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_E_F_4" d="M288.681,318L288.681,322.167C288.681,326.333,288.681,334.667,288.681,340.917C288.681,347.167,288.681,351.333,288.681,354.833C288.681,358.333,288.681,361.167,288.681,362.583L288.681,364"></path></g><g class="edgeLabels"><g class="edgeLabel"><g transform="translate(0, 0)" class="label"></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"></g></g></g><g class="nodes"><g transform="translate(90.34375, 35)" id="flowchart-A-33" class="node default"><rect height="54" width="164.6875" y="-27" x="-82.34375" style="" class="basic label-container"></rect><g transform="translate(-52.34375, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="104.6875"><p xmlns="http://www.w3.org/1999/xhtml"><span></span></p><p xmlns="http://www.w3.org/1999/xhtml">Linearizability</p><p xmlns="http://www.w3.org/1999/xhtml"></p></foreignObject></g></g><g transform="translate(288.6812515258789, 151)" id="flowchart-B-34" class="node default"><rect height="78" width="245.3000030517578" y="-39" x="-122.6500015258789" style="" class="basic label-container"></rect><g transform="translate(-92.6500015258789, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="185.3000030517578"><p xmlns="http://www.w3.org/1999/xhtml"><span></span></p><p xmlns="http://www.w3.org/1999/xhtml">Every operation appears<br>atomic</p><p xmlns="http://www.w3.org/1999/xhtml"></p></foreignObject></g></g><g transform="translate(288.6812515258789, 35)" id="flowchart-C-35" class="node default"><rect height="54" width="131.9875030517578" y="-27" x="-65.9937515258789" style="" class="basic label-container"></rect><g transform="translate(-35.993751525878906, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="71.98750305175781"><p xmlns="http://www.w3.org/1999/xhtml"><span></span></p><p xmlns="http://www.w3.org/1999/xhtml">Durability</p><p xmlns="http://www.w3.org/1999/xhtml"></p></foreignObject></g></g><g transform="translate(481.2687530517578, 35)" id="flowchart-D-37" class="node default"><rect height="54" width="153.1875" y="-27" x="-76.59375" style="" class="basic label-container"></rect><g transform="translate(-46.59375, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="93.1875"><p xmlns="http://www.w3.org/1999/xhtml"><span></span></p><p xmlns="http://www.w3.org/1999/xhtml">Consistency</p><p xmlns="http://www.w3.org/1999/xhtml"></p></foreignObject></g></g><g transform="translate(288.6812515258789, 279)" id="flowchart-E-40" class="node default"><rect height="78" width="192.1875" y="-39" x="-96.09375" style="" class="basic label-container"></rect><g transform="translate(-66.09375, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="132.1875"><p xmlns="http://www.w3.org/1999/xhtml"><span></span></p><p xmlns="http://www.w3.org/1999/xhtml">No data loss<br>No double-spend</p><p xmlns="http://www.w3.org/1999/xhtml"></p></foreignObject></g></g><g transform="translate(288.6812515258789, 395)" id="flowchart-F-42" class="node default"><rect height="54" width="210.1750030517578" y="-27" x="-105.0875015258789" style="fill:#c8e6c9 !important" class="basic label-container"></rect><g transform="translate(-75.0875015258789, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="150.1750030517578"><p xmlns="http://www.w3.org/1999/xhtml"><span></span></p><p xmlns="http://www.w3.org/1999/xhtml">Financial Guarantee</p><p xmlns="http://www.w3.org/1999/xhtml"></p></foreignObject></g></g></g></g></g></svg>

### Performance Under Load

| Scenario | VSR | Raft | Impact |
| --- | --- | --- | --- |
| **Stable Primary** | No consensus overhead | Heartbeats only | VSR wins (fewer messages) |
| **Primary Failure** | Deterministic failover, < 10ms | Random timeout, 100-300ms | VSR 10-30x faster |
| **High Throughput** | Batching reduces per-txn cost | Per-txn replication | VSR 100-1000x better |
| **Network Partitions** | Quorum in larger partition continues | Quorum in larger partition continues | Equivalent |

---

## Why This Matters for Financial Systems

1. **Predictability:** Deterministic failover means SLAs are achievable. No random election storms.
2. **Throughput:** Financial transactions at scale demand near-database speeds. VSR delivers.
3. **Correctness by Design:** Debit/credit invariants + VSR consensus = no double-spend bugs.
4. **Operational Simplicity:** One binary, no external coordinators. Reduces failure modes in production.
5. **Audit Trail:** Every transaction stamped with a global order. Compliance-friendly by default.

---

## Summary

**Raft became famous because it's understandable.** But understandability shouldn't be the only metric— **availability and performance matter too.** VSR predates Paxos (1988) and solved these problems decades ago. **TigerBeetle resurrects it for a new era** where financial systems demand both **correctness at scale** and **throughput that doesn't compromise safety.**

If you're building systems where a millisecond of failover latency or a percentage point of throughput matters, VSR isn't just academic— **it's a pragmatic engineering choice.**

---

## Key Takeaways

- **VSR = Deterministic + Passive + Efficient**
- **Raft = Democratic + Active + Understandable**
- **For Finance: VSR wins on latency, throughput, and predictability**
- **TigerBeetle proves VSR is production-ready at scale**