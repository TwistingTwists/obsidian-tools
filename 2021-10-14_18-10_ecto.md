---
tags:
  - ecto
  - phoenix
---

- validate_required => does not recover from errors on its own when using in forms
  - instead we can fileter erros in maually and wrap it in out validate_required. (model.ex)


## Keeping changes from previous changeset and applying new ones only.
usecase: when validating a field many times .e.g via phx-change in a form. you can keep these changes so that you can render them in the song componetns.

```elixir
 @keep_changes [:duration, :mp3_filesize, :mp3_filepath]
  def change_song(%Ecto.Changeset{} = prev_changeset, attrs) do
    %Song{}
    |> change_song(attrs)
    |> Ecto.Changeset.change(Map.take(prev_changeset.changes, @keep_changes))
  end
```


## associations cheatsheet - diagram
![ecto associations image](/Users/abhishektripathi/Downloads/dev_work/learnings/assets/imgs/2023-03-31-17-33-48.png)
